---
import { CommonViewContainer } from "@/components/parts/CommonViewContainer"
import { ArticleCardMiniList } from "@/components/templates/list/ArticleCardMiniList"
import { getRecentArticles } from "@/services/api"
import { isValidArray } from "@/utils"
import { transformDataToArticleInfo } from "@/utils/transformer"

const recentArticles = await getRecentArticles()
const recentArticleInfoList = await Promise.all(recentArticles.map(transformDataToArticleInfo))
---

<CommonViewContainer
  sectionTitleProps={{
    title: "最近投稿された記事",
    icon: { name: "labelPlus", coloringMethod: "fill" }
  }}
>
  {isValidArray(recentArticleInfoList) && <ArticleCardMiniList cards={recentArticleInfoList} />}
</CommonViewContainer>
